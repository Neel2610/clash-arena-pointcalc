<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Clash Arena ESP Manager - Professional Free Fire Tournament Management System">
    <title>Clash Arena ESP Manager</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- html2canvas CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">‚öîÔ∏è</div>
                    <h1 class="app-title">
                        <span class="title-main">CLASH ARENA</span>
                        <span class="title-sub">ESP MANAGER</span>
                    </h1>
                </div>
                <div class="header-status">
                    <span class="status-indicator"></span>
                    <span class="status-text">System Active</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- LOBBY LIST VIEW -->
            <section class="lobby-section" id="lobbyListView">
                
                <!-- Section Header -->
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="title-icon">üéÆ</span>
                        Lobby Management
                    </h2>
                    <button class="btn-primary" id="createLobbyBtn">
                        <span class="btn-icon">+</span>
                        Create Lobby
                    </button>
                </div>

                <!-- Lobby Stats -->
                <div class="lobby-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalLobbies">0</div>
                        <div class="stat-label">Active Lobbies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalTeams">0</div>
                        <div class="stat-label">Total Teams</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalMatches">0</div>
                        <div class="stat-label">Completed Matches</div>
                    </div>
                </div>

                <!-- Lobbies Grid -->
                <div class="lobbies-grid" id="lobbiesGrid">
                    <!-- Lobby cards will be inserted here -->
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon">üì≠</div>
                    <h3 class="empty-title">No Lobbies Created</h3>
                    <p class="empty-text">Create your first lobby to start managing teams and matches</p>
                    <button class="btn-secondary" id="createFirstLobby">
                        <span class="btn-icon">+</span>
                        Create First Lobby
                    </button>
                </div>

            </section>

            <!-- LOBBY DETAIL VIEW -->
            <section class="lobby-detail-section hidden" id="lobbyDetailView">
                
                <!-- Back Button & Lobby Header -->
                <div class="detail-header">
                    <button class="btn-back" id="backToLobbies">
                        <span class="btn-icon">‚Üê</span>
                        Back to Lobbies
                    </button>
                    <div class="detail-title-section">
                        <h2 class="detail-title" id="currentLobbyName">Lobby Name</h2>
                        <div class="detail-subtitle">
                            <span id="currentLobbyId">lobby_id</span>
                            <span class="separator">‚Ä¢</span>
                            <span id="currentMatchCount">Match 0/6</span>
                        </div>
                    </div>
                </div>

                <!-- Match Input Section -->
                <div class="match-input-section">
                    <div class="section-header-small">
                        <h3 class="section-title-small">
                            <span class="title-icon">üìù</span>
                            Match Input
                        </h3>
                        <button class="btn-primary" id="addMatchBtn">
                            <span class="btn-icon">+</span>
                            Add Match Results
                        </button>
                    </div>

                    <!-- Match Input Form (Hidden by default) -->
                    <div class="match-form hidden" id="matchForm">
                        <div class="form-header">
                            <h4 class="form-title">Enter Match Results</h4>
                            <button class="form-close" id="closeMatchForm">‚úï</button>
                        </div>
                        
                        <div class="match-form-grid" id="matchFormGrid">
                            <!-- Team input rows will be generated here -->
                        </div>

                        <div class="form-actions">
                            <button class="btn-secondary" id="cancelMatchBtn">Cancel</button>
                            <button class="btn-primary" id="saveMatchBtn">
                                <span class="btn-icon">‚úì</span>
                                Save Match Results
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Live Rankings Table -->
                <div class="rankings-section">
                    <div class="section-header-small">
                        <h3 class="section-title-small">
                            <span class="title-icon">üèÜ</span>
                            Live Rankings
                        </h3>
                        <div class="action-buttons-group">
                            <button class="btn-secondary" id="generateCardBtn">
                                <span class="btn-icon">üé®</span>
                                Generate Card
                            </button>
                            <button class="btn-secondary" id="exportCSVBtn">
                                <span class="btn-icon">üìä</span>
                                Export CSV
                            </button>
                        </div>
                    </div>

                    <!-- Table with horizontal scroll wrapper -->
                    <div class="table-scroll-wrapper">
                        <div class="table-container">
                            <table class="rankings-table" id="rankingsTable">
                                <thead>
                                    <tr>
                                        <th class="rank-col">Rank</th>
                                        <th class="team-col">Team Name</th>
                                        <th class="stat-col">Booyahs!</th>
                                        <th class="stat-col">Place Pts</th>
                                        <th class="stat-col">Kills</th>
                                        <th class="stat-col total-col">Total Pts</th>
                                    </tr>
                                </thead>
                                <tbody id="rankingsTableBody">
                                    <!-- Rankings will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Match History -->
                <div class="match-history-section">
                    <div class="section-header-small">
                        <h3 class="section-title-small">
                            <span class="title-icon">üìä</span>
                            Match History
                        </h3>
                    </div>
                    <div class="match-history-list" id="matchHistoryList">
                        <!-- Match history cards will be inserted here -->
                    </div>
                    <div class="empty-state-small" id="emptyMatchHistory">
                        <p>No matches recorded yet</p>
                    </div>
                </div>

            </section>

            <!-- CARD GENERATOR VIEW -->
<section class="card-generator-section hidden" id="cardGeneratorView">
    
    <!-- Back Button -->
    <div class="detail-header">
        <button class="btn-back" id="backToLobbyFromCard">
            <span class="btn-icon">‚Üê</span>
            Back to Lobby
        </button>
        <div class="detail-title-section">
            <h2 class="detail-title">Card Generator</h2>
            <div class="detail-subtitle">
                Customize and export your results card
            </div>
        </div>
    </div>

    <!-- Customization Panel -->
    <div class="customization-panel">
        <h3 class="panel-title">
            <span class="title-icon">üé®</span>
            Customization Options
        </h3>
        
        <div class="custom-controls-grid">
            <!-- Background Image -->
            <div class="control-group">
                <label class="control-label">Background Image URL</label>
                <input 
                    type="text" 
                    id="bgImageInput" 
                    class="control-input" 
                    placeholder="https://example.com/image.jpg"
                >
                <button class="btn-small" id="applyBgBtn">Apply</button>
            </div>

            <!-- Background Color -->
            <div class="control-group">
                <label class="control-label">Background Color</label>
                <div class="color-input-wrapper">
                    <input 
                        type="color" 
                        id="bgColorInput" 
                        class="control-color"
                        value="#0f0f0f"
                    >
                    <input 
                        type="text" 
                        id="bgColorText" 
                        class="control-input-small"
                        value="#0f0f0f"
                    >
                </div>
            </div>

            <!-- Text Color -->
            <div class="control-group">
                <label class="control-label">Text Color</label>
                <div class="color-input-wrapper">
                    <input 
                        type="color" 
                        id="textColorInput" 
                        class="control-color"
                        value="#ffffff"
                    >
                    <input 
                        type="text" 
                        id="textColorText" 
                        class="control-input-small"
                        value="#ffffff"
                    >
                </div>
            </div>

            <!-- Overlay Color -->
            <div class="control-group">
                <label class="control-label">Text Background Overlay</label>
                <div class="color-input-wrapper">
                    <input 
                        type="color" 
                        id="overlayColorInput" 
                        class="control-color"
                        value="#0f0f0f"
                    >
                    <input 
                        type="range" 
                        id="overlayOpacity" 
                        class="control-range"
                        min="0"
                        max="100"
                        value="95"
                    >
                    <span class="range-value" id="overlayOpacityValue">95%</span>
                </div>
            </div>

            <!-- Reset Button -->
            <div class="control-group">
                <button class="btn-secondary full-width" id="resetStylesBtn">
                    <span class="btn-icon">‚Ü∫</span>
                    Reset to Default
                </button>
            </div>
        </div>
    </div>

    <!-- Card Preview -->
    <div class="card-preview-section">
        <div class="section-header-small">
            <h3 class="section-title-small">
                <span class="title-icon">üëÅÔ∏è</span>
                Live Preview
            </h3>
            <button class="btn-primary" id="downloadCardBtn">
                <span class="btn-icon">‚¨á</span>
                Download Card
            </button>
        </div>

        <!-- Result Card - REDESIGNED FOR FREE FIRE STYLE -->
        <div class="result-card-ff" id="resultCard">
            <div class="card-background-layer" id="cardBgLayer"></div>
            <div class="card-content-layer-ff" id="cardContentLayer">
                
                <!-- Card Header - FF Style -->
                <div class="card-header-ff">
                    <div class="header-top-bar"></div>
                    <div class="header-content-ff">
                        <div class="tournament-badge">
                            <div class="badge-icon">‚öîÔ∏è</div>
                        </div>
                        <div class="tournament-info">
                            <h1 class="tournament-name" id="cardLobbyName">LOBBY NAME</h1>
                            <div class="match-info-bar">
                                <span class="match-label">RESULTS</span>
                                <span class="match-divider">|</span>
                                <span class="match-count" id="cardMatchCount">AFTER 0 MATCHES</span>
                            </div>
                        </div>
                    </div>
                    <div class="header-bottom-glow"></div>
                </div>

                <!-- Scoreboard Table - FF Style -->
                <div class="scoreboard-container">
                    <table class="scoreboard-table" id="cardTable">
                        <thead>
                            <tr>
                                <th class="col-rank">RANK</th>
                                <th class="col-team">TEAM NAME</th>
                                <th class="col-stat">BOOYAH</th>
                                <th class="col-stat">PLACE</th>
                                <th class="col-stat">KILLS</th>
                                <th class="col-total">TOTAL</th>
                            </tr>
                        </thead>
                        <tbody id="cardTableBody">
                            <!-- Will be populated by JS -->
                        </tbody>
                    </table>
                </div>

                <!-- Card Footer - FF Style -->
                <div class="card-footer-ff">
                    <div class="footer-divider"></div>
                    <p class="powered-by">
                        POWERED BY 
                        <span class="brand-name">CLASH ARENA</span>
                    </p>
                </div>

            </div>
        </div>
    </div>

</section>

        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p class="footer-text">Powered by <span class="highlight">Clash Arena</span> | Built for Champions</p>
        </footer>

    </div>

    <!-- Create Lobby Modal -->
    <div class="modal" id="createLobbyModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New Lobby</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="lobbyName" class="form-label">Lobby Name</label>
                    <input 
                        type="text" 
                        id="lobbyName" 
                        class="form-input" 
                        placeholder="Enter lobby name (e.g., Lobby A, Finals 1)"
                        maxlength="30"
                    >
                    <div class="form-hint">Maximum 30 characters</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelBtn">Cancel</button>
                <button class="btn-primary" id="confirmCreateBtn">
                    <span class="btn-icon">‚úì</span>
                    Create Lobby
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteLobbyModal">
        <div class="modal-overlay" id="deleteModalOverlay"></div>
        <div class="modal-content modal-danger">
            <div class="modal-header">
                <h3 class="modal-title">Delete Lobby</h3>
                <button class="modal-close" id="deleteModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <p class="warning-text">Are you sure you want to delete <strong id="deleteLobbyName"></strong>?</p>
                <p class="warning-subtext">This action cannot be undone. All teams and match data will be permanently deleted.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn-danger" id="confirmDeleteBtn">
                    <span class="btn-icon">üóëÔ∏è</span>
                    Delete Lobby
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script src="cardGenerator.js"></script>
</body>
</html>
